# Changelog

> Last updated: 2026-02-13

All notable changes to this project are documented in this file.

The format follows [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
and this project follows [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Security

- Added `CodeQL` workflow at `.github/workflows/codeql.yml`.
- Added header verification report: `docs/security/header-audit-report-2026-02-13.md`.
- Added analytics ingest security model document:
  - `docs/monetization/analytics-ingest-redesign.md`
- Added strict analytics policy runtime flag path and test coverage:
  - `app/api/analytics/route.ts`
  - `tests/unit/analytics-route.test.ts`

### Added

- Added controlled v2 -> v3 migration package:
  - `MIGRATION.md`
  - `docs/migration/redirect-map.csv`
  - `docs/migration/feature-flags.md`
  - `docs/migration/deprecation-policy.md`
- Added V3 feature-flag behavior test coverage:
  - `tests/unit/next-config-redirects.test.ts`
  - `tests/unit/navigation-feature-flag.test.tsx`
- Added V3 phase-0 and local validation reports:
  - `docs/release/reports/v3-phase0-foundation-2026-02-13.md`
  - `docs/release/reports/v3-dev-validation-2026-02-13T22-34-57Z.md`
- Added Sprint 1 release note draft:
  - `docs/release/v3-sprint1-release-note-draft.md`
- Added observability and operations package:
  - `docs/observability/alerting-policy.md`
  - `docs/observability/slo-dashboard.md`
  - `docs/observability/dr-test-report.md`
  - `docs/operations/incident-response-playbook.md`

### Changed

- Replaced placeholder README with repository-specific runtime, quality, migration, and observability guidance.
- Wired V3 migration flags in runtime/config:
  - `NEXT_PUBLIC_FEATURE_V3_NAV` in `components/ui/Navigation.tsx`
  - `FEATURE_V3_REDIRECTS` in `next.config.mjs`
  - `FEATURE_V3_ANALYTICS_POLICY` in `app/api/analytics/route.ts`
- Synced environment examples with V3 runtime flags:
  - `.env.example`
  - `env.production.example`
  - `env.staging.example`
- Synced migration/release docs:
  - `docs/migration/feature-flags.md`
  - `docs/release/v3-kickoff-execution-plan.md`
  - `docs/release/v3-readiness-dashboard.md`
  - `docs/index.md`

### Fixed

- Stabilized Playwright a11y scan against navigation race (`Execution context was destroyed`) in `tests/e2e/a11y.spec.ts`.
- Fixed `/loan` color-contrast violations (WCAG AA serious) via stronger input/label/status contrast:
  - `components/features/loan/LoanPage.tsx`
  - `app/globals.css`
- v2 product simplification baseline:
  - Removed global search surfaces from navigation and dashboard-oriented pages.
  - Removed account/admin/subscription/history user-facing flows by returning `410` on related API routes and `notFound()` on deprecated pages.
  - Removed copy-history cards and write calls from high-traffic tools (`loan`, `salary`, `validation`, `text`).
  - Simplified footer to a single fixed attribution link across pages.
  - Switched footer attribution link to use `PORTFOLIO_URL` / `NEXT_PUBLIC_PORTFOLIO_URL` when available.
  - Reworked date-tool inputs to structured day/month/year fields.
- v1.1.1 policy update (development baseline):
  - Removed copy-history capability and UI from `shared/ui/ToastProvider.tsx` and related tool pages.
  - Disabled account/auth surfaces (`/account` + `/api/auth/*`) for no-login operation mode.
  - Disabled non-core monetization and admin surfaces (`/support`, `/ads`, `/plans`, `/subscription-roadmap`, `/admin/monetization`, `/admin/site-settings`).
  - Removed developers section from navigation and trust area, and updated sitemap routes.
  - Cleaned footer links to keep only privacy policy entry and removed dashboard/account/subscription links.
- v1.1.1 local UI baseline adjustments:
  - Removed `AdsConsentBanner` from `app/layout.tsx`.
  - Aligned default developer attribution text with product branding in `lib/siteSettings.ts`.
  - Hid copy-history floating control on mobile to prevent overlap with navigation in `shared/ui/ToastProvider.tsx`.
- Hardened production post-deploy report network behavior:
  - Added retry/backoff for smoke and header checks in `scripts/deploy/generate-post-deploy-report.mjs`.
  - Added automatic fallback base URL probing between apex and `www` host variants.
  - Treated protected admin route statuses (`401/403/404`) as valid for `/admin/site-settings` smoke verification.
- Hardened rollback release selection in `ops/deploy/rollback.sh`:
  - Automatic rollback now skips release candidates missing `ecosystem.config.cjs` instead of failing immediately.
- Added local runtime smoke gate for production build output:
  - Added `scripts/quality/run-local-smoke.mjs` to boot app locally and verify critical routes/status/content-type.
  - Wired `pnpm smoke:local` into `.github/workflows/ci-core.yml` build job after `pnpm build`.
- CI workflow test-script detection hotfix:
  - Updated `.github/workflows/js-ts-level1.yml` to run `test:unit` only when that exact script exists.

### Added

- New text tool for address conversion:
  - Added Persian-address-to-English converter logic in `features/text-tools/address-fa-to-en.ts`.
  - Added reusable UI module `components/features/text-tools/AddressFaToEnTool.tsx`.
  - Added dedicated route `/text-tools/address-fa-to-en`.
  - Registered SEO/breadcrumb/registry metadata for the new tool.
- V2 finance cluster release notes:
  - Added `docs/release/v2.0.1-finance-cluster.md` with scope, verification, and rollout guidance.
- SQLite-backed site settings storage:
  - Replaced Postgres usage in `lib/server/siteSettings.ts` with minimal local SQLite storage (`node:sqlite`).
- Documentation handoff snapshot for next chat:
  - `docs/snapshots/2026-02-06-docs-priority-refresh-handoff.md`
- SQL migration runner:
  - `scripts/db/migrate.mjs`
- New handoff snapshot:
  - `docs/snapshots/2026-02-07-priority1-db-unification-handoff.md`
  - `docs/snapshots/2026-02-07-priority2-security-privacy-handoff.md`
  - `docs/snapshots/2026-02-07-priority3-coverage-security-tests-handoff.md`
- Admin authorization helper:
  - `lib/server/adminAuth.ts`
- E2E coverage for consent-driven analytics behavior:
  - `tests/e2e/consent-analytics.spec.ts`
- E2E retry coverage for account/history flows:
  - `tests/e2e/account-history-retry.spec.ts`
- Analytics guardrails documentation:
  - `docs/monetization/analytics-guardrails.md`
- Core CI workflow for merge gates:
  - `.github/workflows/ci-core.yml`
- Focused security unit test suites:
  - `tests/unit/subscription-webhook.test.ts`
  - `tests/unit/sessions.test.ts`
  - `tests/unit/rate-limit.test.ts`
  - `tests/unit/auth.test.ts`
  - `tests/unit/ads-consent.test.ts`
- Priority 4 UX async-state baseline:
  - `shared/ui/AsyncState.tsx`
  - `tests/unit/async-state.test.tsx`
- Priority 4 regression tests for history async states:
  - `tests/unit/recent-history-card.test.tsx`
- New handoff snapshot:
  - `docs/snapshots/2026-02-07-priority4-ux-async-state-handoff.md`
  - `docs/snapshots/2026-02-07-priority4-history-regression-handoff.md`
  - `docs/snapshots/2026-02-07-priority4-tools-asyncstate-retry-e2e-handoff.md`
  - `docs/snapshots/2026-02-07-priority4-high-traffic-asyncstate-regression-handoff.md`
  - `docs/snapshots/2026-02-07-priority4-roadmap-board-sync-handoff.md`
  - `docs/snapshots/2026-02-07-priority4-wcag-asyncstate-closure-handoff.md`
  - `docs/snapshots/2026-02-07-priority5-seo-pwa-closure-handoff.md`
  - `docs/snapshots/2026-02-07-priority6-monetization-ops-closure-handoff.md`
  - `docs/snapshots/2026-02-07-priority7-low-risk-revenue-closure-handoff.md`
  - `docs/snapshots/2026-02-07-priority8-controlled-optimization-handoff.md`
  - `docs/snapshots/2026-02-07-priority9-operations-stability-handoff.md`
  - `docs/snapshots/2026-02-07-priority10-close-automation-handoff.md`
  - `docs/snapshots/2026-02-07-priority11-deploy-readiness-contract-handoff.md`
  - `docs/snapshots/2026-02-07-priority12-rc-rollback-automation-handoff.md`
  - `docs/snapshots/2026-02-07-priority13-launch-smoke-automation-handoff.md`
  - `docs/snapshots/2026-02-07-final-deployment-readiness-sync-handoff.md`
  - `docs/snapshots/2026-02-08-visual-roadmap-boards-refresh-handoff.md`
  - `docs/snapshots/2026-02-08-admin-developer-attribution-settings-handoff.md`
  - `docs/snapshots/2026-02-08-admin-attribution-delivery-final-handoff.md`
  - `docs/snapshots/2026-02-08-admin-site-settings-e2e-contract-handoff.md`
- JSON-LD contract tests for tool/category/topics/pillar routes:
  - `tests/unit/seo-jsonld-contract.test.ts`
- Service worker cache-version contract test:
  - `tests/unit/sw-cache-version.test.ts`
- Service worker cache-version validation script:
  - `scripts/pwa/validate-sw-version.mjs`
- Monetization review backlog contract artifacts:
  - `docs/monetization/review-backlog.json`
  - `scripts/monetization/validate-review-backlog.mjs`
  - `tests/unit/review-backlog-contract.test.ts`
- Analytics storage security tests:
  - `tests/unit/analytics-store-security.test.ts`
- Codex Cloud heavy-run references added to docs:
  - `docs/codex-audit-playbook.md`
  - `docs/developer-guide.md`
  - `docs/index.md`
- Priority 7 ad-metrics privacy and reporting hardening:
  - `tests/unit/ad-analytics-privacy.test.ts`
- Priority 8 internal experiment coverage:
  - `tests/unit/ad-experiment.test.ts`
  - `public/ads/local-sponsor-banner-a.svg`
  - `public/ads/local-sponsor-banner-b.svg`
- Priority 9 operations contract artifacts:
  - `docs/monetization/operations-checklist.json`
  - `scripts/monetization/validate-operations-checklist.mjs`
  - `tests/unit/monetization-operations-contract.test.ts`
- Priority 10 close automation and alerting-decision artifacts:
  - `docs/monetization/alerting-decision-rules.json`
  - `scripts/monetization/validate-alerting-decision-rules.mjs`
  - `scripts/monetization/run-monthly-close.mjs`
  - `scripts/monetization/run-quarterly-close.mjs`
  - `scripts/monetization/run-close-all.mjs`
  - `tests/unit/monetization-alerting-decision-contract.test.ts`
- Priority 11 deployment readiness contract artifacts:
  - `docs/deployment-readiness-gates.json`
  - `scripts/deploy/validate-readiness-gates.mjs`
  - `scripts/deploy/run-readiness-gates.mjs`
  - `docs/deployment/reports/README.md`
  - `tests/unit/deployment-readiness-contract.test.ts`
  - `tests/unit/deployment-readiness-report-contract.test.ts`
- Priority 12 release candidate and rollback drill artifacts:
  - `docs/release-candidate-checklist.json`
  - `docs/rollback-drill-checklist.json`
  - `scripts/release/validate-rc-checklist.mjs`
  - `scripts/release/validate-rollback-drill.mjs`
  - `scripts/release/run-rc-gates.mjs`
  - `docs/release/reports/README.md`
  - `tests/unit/release-candidate-contract.test.ts`
  - `tests/unit/rollback-drill-contract.test.ts`
  - `tests/unit/release-rc-report-contract.test.ts`
- Priority 13 launch-day smoke artifacts:
  - `docs/launch-day-checklist.json`
  - `scripts/release/validate-launch-day-checklist.mjs`
  - `scripts/release/run-launch-smoke.mjs`
  - `tests/unit/launch-day-checklist-contract.test.ts`
  - `tests/unit/launch-smoke-report-contract.test.ts`
- Admin-managed developer attribution settings:
  - `app/api/admin/site-settings/route.ts`
  - `app/admin/site-settings/page.tsx`
  - `components/features/monetization/SiteSettingsAdminPage.tsx`
  - `lib/siteSettings.ts`
  - `lib/server/siteSettings.ts`
  - `tests/unit/admin-site-settings-route.test.ts`
  - `tests/unit/site-settings-validation.test.ts`
- Admin site-settings E2E coverage:
  - `tests/e2e/admin-site-settings.spec.ts`
  - `tests/e2e/helpers/admin.ts`
- Site settings contract artifact and validator:
  - `docs/monetization/site-settings-contract.json`
  - `scripts/monetization/validate-site-settings-contract.mjs`
  - `tests/unit/site-settings-contract.test.ts`
- New handoff snapshot:
  - `docs/snapshots/2026-02-08-admin-site-settings-persistence-and-ci-gate-handoff.md`
  - `docs/snapshots/2026-02-08-full-e2e-and-admin-race-stability-handoff.md`
  - `docs/snapshots/2026-02-08-backend-e2e-runbook-and-readiness-summary-handoff.md`
  - `docs/snapshots/2026-02-08-priority4-ci-readiness-artifacts-handoff.md`
  - `docs/snapshots/2026-02-08-license-migration-taskboard-handoff.md`
  - `docs/snapshots/2026-02-08-license-priority1-contract-enforcement-handoff.md`
  - `docs/snapshots/2026-02-08-eod-docs-sync-handoff.md`
- Unit race-regression coverage for admin site-settings loading/save sequence:
  - `tests/unit/site-settings-admin-page-race.test.tsx`
- Deployment readiness summary generator script:
  - `scripts/deploy/generate-readiness-summary.mjs`
- License migration governance docs and policy assets:
  - `docs/licensing/license-migration-taskboard.md`
  - `docs/licensing/dual-license-policy.md`
  - `docs/licensing/package-license-transition.md`
  - `LICENSE-NONCOMMERCIAL.md`
  - `LICENSE-COMMERCIAL.md`
  - `COMMERCIAL.md`
  - `NOTICE`
  - `TRADEMARKS.md`
- Licensing contract validator:
  - `scripts/licensing/validate-license-assets.mjs`
- DCO governance assets for external contributions:
  - `DCO.md`
  - `.github/PULL_REQUEST_TEMPLATE.md`
- CLA hybrid governance artifacts:
  - `docs/licensing/cla-individual.md`
  - `docs/licensing/cla-corporate.md`
  - `docs/licensing/v2-license-release-checklist.md`
- CLA operations and dry-run artifacts:
  - `docs/licensing/cla-operations.md`
  - `docs/licensing/reports/v2-license-migration-dry-run-2026-02-08.json`
- Release-prep licensing artifacts:
  - `docs/licensing/v2-release-notes-template.md`
  - `docs/licensing/reports/v2-license-release-prep-dry-run-2026-02-08T14-29-57-080Z.json`
  - `docs/licensing/reports/README.md`
  - `docs/licensing/reports/v2.0.0-release-notes.md`
  - `docs/licensing/reports/v2-license-checklist-execution-2026-02-08-final.md`
- Post-release licensing verification artifacts:
  - `docs/licensing/reports/v2.0.0-post-release-verification-2026-02-08.md`
- New handoff snapshot:
  - `docs/snapshots/2026-02-08-license-post-release-verification-docs-sync-handoff.md`
  - `docs/snapshots/2026-02-08-license-post-release-rerun-and-deploy-roadmap-sync.md`
  - `docs/snapshots/2026-02-08-ci-core-workflow-hardening-handoff.md`
  - `docs/snapshots/2026-02-08-ci-quality-regression-fix-rerun-handoff.md`
  - `docs/snapshots/2026-02-08-ci-core-green-post-hardening-handoff.md`
  - `docs/snapshots/2026-02-08-release-readiness-final-lock-and-deploy-start.md`
  - `docs/snapshots/2026-02-08-deployment-roadmap-priority11-12-tasking-handoff.md`
  - `docs/snapshots/2026-02-08-deployment-external-actions-owner-checklist-handoff.md`
- Licensing consistency validator:
  - `scripts/licensing/validate-license-consistency.mjs`
- New handoff snapshot:
  - `docs/snapshots/2026-02-08-license-priority2-operational-hardening-handoff.md`
  - `docs/snapshots/2026-02-08-license-priority3-cla-hybrid-release-readiness-handoff.md`
  - `docs/snapshots/2026-02-08-license-priority4-operations-consistency-dryrun-handoff.md`
  - `docs/snapshots/2026-02-08-license-priority5-release-prep-automation-handoff.md`
  - `docs/snapshots/2026-02-08-license-priority6-rc-boundary-execution-handoff.md`
  - `docs/snapshots/2026-02-08-license-priority7-final-release-cut-handoff.md`

### Changed

- Core documentation refreshed to priority-first structure (timeline language removed):
  - `docs/roadmap.md`
  - `docs/deployment-roadmap.md`
  - `docs/operations.md`
  - `docs/monetization/roadmap.md`
  - `docs/monetization/task-plan.md`
- Deployment roadmap extended with explicit post-release licensing verification priority:
  - `docs/deployment-roadmap.md`
- Post-release verification report updated with live rerun evidence:
  - `docs/licensing/reports/v2.0.0-post-release-verification-2026-02-08.md`
- Post-release verification report finalized with green cloud CI run:
  - `docs/licensing/reports/v2.0.0-post-release-verification-2026-02-08.md`
- Release readiness docs locked with final cloud signal and deploy-start handoff:
  - `docs/deployment-roadmap.md`
  - `docs/operations.md`
  - `docs/roadmap-board.html`
  - `docs/deployment-roadmap.html`
  - `public/roadmap-board.html`
  - `public/deployment-roadmap.html`
- Deployment roadmap extended with executable phases for real deploy and post-deploy validation:
  - `docs/deployment-roadmap.md`
  - `docs/deployment-roadmap.html`
  - `public/deployment-roadmap.html`
- Deployment docs now include explicit owner-side external actions (VPS/domain/DNS/secrets/assets):
  - `docs/deployment-roadmap.md`
  - `docs/deployment-roadmap.html`
  - `public/deployment-roadmap.html`
  - `docs/operations.md`
- Governance docs improved:
  - `AGENTS.md`
  - `SECURITY.md`
  - `SKILL.md`
  - `skill.toml`
  - `CONTRIBUTING.md`
- README now documents license boundary and dual-license migration references:
  - `README.md`
- Roadmap and docs index synced with licensing workstream:
  - `docs/roadmap.md`
  - `docs/index.md`
- Contract gate chain now enforces licensing assets:
  - `package.json` (`ci:contracts` + `licensing:validate`)
- Licensing contract validator now enforces DCO governance artifacts and references:
  - `scripts/licensing/validate-license-assets.mjs`
  - `CONTRIBUTING.md`
  - `AGENTS.md`
- Licensing contract validator now enforces CLA hybrid artifacts and references:
  - `scripts/licensing/validate-license-assets.mjs`
  - `docs/licensing/cla-individual.md`
  - `docs/licensing/cla-corporate.md`
  - `docs/licensing/v2-license-release-checklist.md`
- Licensing validation now includes consistency checks:
  - `package.json` (`licensing:consistency`, updated `licensing:validate`)
  - `scripts/licensing/validate-license-consistency.mjs`
- Operations runbook now includes CLA audit flow and reference-id policy:
  - `docs/operations.md`
- CI core now has independent licensing docs gate:
  - `.github/workflows/ci-core.yml` (`licensing-docs` job)
- CI core push triggers now include release branch:
  - `.github/workflows/ci-core.yml` (`release/v2-license-prep`)
- CI core hardened to bypass repeated `Setup Node` failures via runner runtime verification + pinned corepack/pnpm:
  - `.github/workflows/ci-core.yml`
- Playwright config stabilized to avoid recurring lint indentation regression in CI quality job:
  - `playwright.config.ts`
- Release-candidate boundary commit for v2 license migration:
  - `package.json` (`2.0.0-rc.1`, `SEE LICENSE IN LICENSE`)
  - `LICENSE` selector updated for dual-license boundary
  - `README.md` license boundary section updated
- Final release cut completed:
  - `main` now includes dual-license boundary updates
  - release tag `v2.0.0` created and pushed
- `COMMERCIAL.md` now includes executable issuance template and required fields.
- `COMMERCIAL.md` now includes FAQ for scope/version/support/transfer/cancellation.
- MCP configuration hardened and aligned with current workspace path:
  - `mcp-config.toml`
- Database path unified to SQL-first and clean install stabilized:
  - `lib/server/db.ts`
  - `lib/server/historyShare.ts`
  - `lib/server/rateLimit.ts`
  - `scripts/db/schema.sql`
  - `package.json`
  - `docs/operations.md`
  - `README.md`
- Priority 2 security baseline implemented:
  - admin route protected by email allowlist
  - production analytics ingest enforces secret
  - client-side analytics gated by consent
- Priority 3 quality baseline completed:
  - coverage scope aligned with core API/server/shared modules
  - coverage thresholds set to `85/85/80/85` (lines/functions/branches/statements)
  - admin auth tests expanded for unauthenticated/non-admin/admin branches
- Priority 4 UX baseline started:
  - unified `loading/empty/error` states in account/history with reusable async-state component
  - recoverable errors now expose explicit retry actions
- Priority 4 async-state expansion completed for high-traffic tools:
  - `components/features/loan/LoanPage.tsx`
  - `components/features/salary/SalaryPage.tsx`
  - `components/features/date-tools/DateToolsPage.tsx`
  - `components/features/text-tools/TextToolsPage.tsx`
- Unit coverage added for text-tools async error states:
  - `tests/unit/text-tools-page.test.tsx`
- Unit interaction coverage added for validation-tools:
  - `tests/unit/validation-tools-page.test.tsx`
- Unit regression coverage added for AsyncState error rendering in high-traffic tools:
  - `tests/unit/high-traffic-tools-async-state.test.tsx`
- Test setup noise filter for known React async warnings in UI suites:
  - `tests/setup.ts` filters only `not wrapped in act(...)` warnings
- Explicit retry recovery messages added and asserted in E2E flows:
  - `components/features/monetization/AccountPage.tsx`
  - `components/features/history/RecentHistoryCard.tsx`
  - `tests/e2e/account-history-retry.spec.ts`
- Retry E2E matcher stability improved by exact API-path routing and text-based recovery assertions:
  - `tests/e2e/account-history-retry.spec.ts`
- Added account-load retry E2E coverage for `/api/auth/me` transient failure recovery:
  - `tests/e2e/account-history-retry.spec.ts`
- Extracted shared E2E retry helpers and migrated retry specs:
  - `tests/e2e/helpers/retry.ts`
  - `tests/e2e/account-history-retry.spec.ts`
- Extracted shared PWA stability helper for service-worker readiness:
  - `tests/e2e/helpers/pwa.ts`
  - `tests/e2e/offline.spec.ts`
- Account page now exposes explicit recovery notice after successful retry:
  - `components/features/monetization/AccountPage.tsx`
- Added unit contract coverage for account/history state transitions across 401/402/500/timeout:
  - `tests/unit/account-page-retry-contract.test.tsx`
  - `tests/unit/recent-history-card.test.tsx`
- Added CSP guardrail unit tests for environment-specific `unsafe-eval` behavior:
  - `tests/unit/proxy-csp.test.ts`
  - `proxy.ts`
- Priority board visualization synced with actual Priority 4 execution state:
  - `docs/roadmap-board.html`
  - `docs/roadmap.md`
- AsyncState expansion completed for remaining high-impact tool error paths:
  - `features/image-tools/image-tools.tsx`
  - `tests/unit/image-tools-async-state.test.tsx`
- WCAG guardrails expanded on high-traffic routes via Playwright axe checks:
  - `tests/e2e/a11y.spec.ts`
- WCAG contrast regressions fixed for loan flow cards and form placeholders:
  - `components/features/loan/LoanPage.tsx`
  - `app/globals.css`
- JSON-LD generation hardened to avoid empty FAQ entities on category pages:
  - `lib/seo-tools.ts`
- Lighthouse regression baseline tightened and expanded:
  - `lighthouserc.json` enforces `seo/accessibility/best-practices` as error and `performance` as strict warn
  - monitored routes include `/tools`, `/topics`, `/date-tools`
- Service worker versioning contract standardized:
  - `public/sw.js` bumped to `v7-2026-02-07`
  - `tests/e2e/offline.spec.ts` now asserts update message `version` format
  - `package.json` includes `pwa:sw:validate`
- Analytics ingest consent/security contract hardened:
  - `app/api/analytics/route.ts` enforces `metadata.consentGranted=true`
  - `app/api/analytics/route.ts` rejects oversized payloads (`>200` events)
  - `lib/monitoring.ts` stamps consent metadata on client events
- Analytics redaction hardened:
  - `lib/analyticsStore.ts` strips query/hash from paths
  - `lib/analyticsStore.ts` allowlists metadata keys before persistence
- Consent E2E behavior upgraded to assert real deny/accept outcomes:
  - `tests/e2e/consent-analytics.spec.ts`
- Offline E2E stability hardening:
  - `tests/e2e/offline.spec.ts`
  - resilient service-worker readiness retries for transient navigation context resets
  - deterministic cache-clear acknowledgement via `CACHES_CLEARED` service-worker message
- Development-only CSP compatibility for Next.js webpack dev runtime:
  - `proxy.ts` now adds `unsafe-eval` only outside production
- Priority 4 retry behavior validated in browser-level flows for account/history.
- Retry E2E scenarios are gated behind `E2E_RETRY_BACKEND=1` for deterministic fixture-backed execution.
- Client-side timeout guards added for account/history fetch flows to avoid indefinite loading states.
- RTL logical-class cleanup applied on high-traffic financial pages:
  - `components/features/loan/LoanPage.tsx`
  - `components/features/salary/SalaryPage.tsx`
- Priority 7 low-risk monetization closure:
  - `shared/analytics/ads.ts` enforces consent and sanitizes ad identifiers before persistence
  - `shared/analytics/ads.ts` adds aggregated 30-day performance report and JSON export
  - `components/features/monetization/AdsTransparencyPage.tsx` adds transparency report summary and downloadable report
  - `components/features/monetization/MonetizationAdminPage.tsx` adds 30-day ad report summary
  - `tests/e2e/consent-analytics.spec.ts` validates accept/deny flows against real ad rendering behavior
  - `docs/monetization/*`, `docs/roadmap.md`, and `docs/roadmap-board.html` synced to final Priority 7 state
- Priority 8 controlled optimization closure:
  - `shared/monetization/adExperiment.ts` adds deterministic local A/B assignment
  - `shared/ui/AdSlot.tsx` integrates local A/B rendering and variant-aware ad tracking
  - `shared/analytics/ads.ts` now aggregates by variant and tracks UX/revenue KPIs (`consentAcceptanceRate`, `topVariantId`)
  - `components/ads/AdsConsentBanner.tsx` records consent actions for UX KPI aggregation
  - `components/features/monetization/AdsTransparencyPage.tsx` and `components/features/monetization/MonetizationAdminPage.tsx` expose variant/KPI summaries
  - `tests/e2e/consent-analytics.spec.ts` validates stable local variant assignment after reload
  - monetization and roadmap docs synced to final Priority 8 state
- Priority 9 operations stability closure:
  - contract-driven monthly/quarterly ops checklist introduced and wired to validator command
  - `scale/hold/rollback` playbook now bound to executable decision gates
  - roadmap + board + monetization runbooks synced to final Priority 9 state
- Priority 10 close automation closure:
  - monthly/quarterly close flows are now executable via `monetization:close:*` scripts
  - alerting-to-decision mapping is now contract-driven with validator/test guardrails
  - roadmap and monetization docs synced to final Priority 10 state
- Priority 11 deploy readiness closure:
  - deploy readiness gates are now contract-driven (`env/security/pwa/build/lighthouse`) with validator command
  - core deployment gates are executable and report to `docs/deployment/reports/`
  - roadmap and deployment boards synced to final Priority 11 state
- E2E ad-variant stability matcher hardened by slot-specific selectors:
  - `shared/ui/AdSlot.tsx`
  - `tests/e2e/consent-analytics.spec.ts`
- Priority 12 RC/rollback automation closure:
  - RC gates are now contract-driven and executable via `release:rc:*` scripts
  - rollback drill checklist is contract-driven with validator guardrail
  - roadmap + deployment roadmap + HTML boards synced to final Priority 12 state
- Priority 13 launch-day hardening closure:
  - launch-day smoke readiness is contract-driven and executable via `release:launch:*` scripts
  - launch smoke report artifacts are written to `docs/release/reports/` with validator/test guardrails
  - A/B ad variant assignment is now deterministic from first render in `shared/ui/AdSlot.tsx`
  - roadmap + deployment roadmap + HTML boards synced to final Priority 13 state
- Final deployment readiness sync:
  - readiness + RC core gates were executed successfully and reconciled with documentation
  - final handoff snapshot added for next-chat continuity
- CI readiness pipeline now generates and uploads readiness artifacts:
  - `.github/workflows/ci-core.yml`
  - `package.json` (`deploy:readiness:summary`)
  - `scripts/deploy/generate-readiness-summary.mjs`
  - `docs/deployment/reports/README.md`
  - `docs/deployment-roadmap.md`
  - `docs/roadmap.md`
- Visual boards refactor:
  - `docs/roadmap-board.html` and `docs/deployment-roadmap.html` redesigned with KPI dashboard, per-phase progress, and status filters
  - `public/roadmap-board.html` and `public/deployment-roadmap.html` synced with the new visual experience
- Footer attribution and admin-configurable profile links:
  - `components/ui/Footer.tsx` now renders developer attribution and order/portfolio actions from dynamic settings
  - `scripts/db/schema.sql` now includes `site_settings` key-value storage for admin updates
  - `.env.example` and `docs/operations.md` include fallback env keys for attribution links
- Admin site-settings UI now exposes explicit DB-unavailable guidance and env fallback behavior:
  - `components/features/monetization/SiteSettingsAdminPage.tsx`
- Playwright web server env now includes stable admin allowlist for backend-driven admin E2E:
  - `playwright.config.ts`
- Priority/deployment visual boards synced with admin attribution/E2E completion:
  - `docs/roadmap-board.html`
  - `docs/deployment-roadmap.html`
- Admin site-settings form now prevents load/save race to keep `developerName` persistence stable:
  - `components/features/monetization/SiteSettingsAdminPage.tsx`
  - `tests/e2e/admin-site-settings.spec.ts`
- Added CI lightweight contracts gate:
  - `package.json` (`ci:contracts`)
  - `.github/workflows/ci-core.yml`
- Deployment/roadmap docs and visual boards synced with DB-unavailable admin E2E and contract gate:
  - `docs/roadmap.md`
  - `docs/deployment-roadmap.md`
  - `docs/operations.md`
  - `docs/roadmap-board.html`
  - `docs/deployment-roadmap.html`
  - `public/roadmap-board.html`
  - `public/deployment-roadmap.html`
- Full Chromium E2E suite stabilized with backend-enabled admin/retry scenarios:
  - `E2E_ADMIN_BACKEND=1 E2E_RETRY_BACKEND=1 pnpm test:e2e:ci`
- Deployment readiness summary artifact after backend-enabled full E2E:
  - `docs/deployment/reports/readiness-2026-02-08T01-21-20-808Z.json`
  - `docs/deployment/reports/readiness-summary-2026-02-08T01-21-20-808Z.json`

### Removed

- Obsolete dated monetization reports/checklists and phase execution plan.
- Obsolete phase snapshots superseded by the latest handoff snapshot.
- Redundant slide summary file (`docs/technical-audit-summary.pptx`).

## [1.1.0] - 2026-02-05

### Added

- Module-scoped exports (`numbers`, `localization`, `validation`, `finance`, `date-tools`) for tree-shakable consumption.
- Type-safe utilities module exports and library build pipeline.
- Typedoc API documentation generation.
- CI pipelines for linting, testing, security, PR validation, and release automation.
- CI artifact for coverage report in pull requests.
- Dependabot configuration for dependencies and GitHub Actions.
- Benchmarks and examples for Node and browser usage.

### Changed

- Storybook dev stack moved to v9 alpha to align with Next 16 (peer warning acceptable in dev).
- CI now runs full coverage (`pnpm test:ci`) by default.
- API docs and README now document NPM subpath imports.
- Restructured shared utilities into domain-focused modules.
- Improved numeric and Persian localization utilities with stricter normalization.

### Fixed

- Improved input normalization for loose number parsing.

## [1.0.0] - 2026-02-01

### Added

- Initial release with PDF, financial, image, text, and date tools.
