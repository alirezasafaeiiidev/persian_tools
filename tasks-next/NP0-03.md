# ID: NP0-03

## Title

Feature availability framework (flags + consistent disabled UX/API)

## Context

Routes/pages/APIs currently have fragmented disabled behavior:

- multiple routes call `notFound()` (404),
- multiple APIs return 410 with mixed “v1.1.1/v2” wording,
- UI components link to disabled routes.

This undermines trust, breaks UX, and complicates rollout.

## Steps

1. Create a single feature availability module:
   - `isEnabled(feature)` (server + client safe)
   - `getDisabledMessage(feature, locale)`
2. Replace `notFound()` for feature-disabled routes with a consistent “disabled/coming soon” page:
   - correct `robots` policy (`noindex` if not live)
   - CTA to `/support` if relevant
3. Standardize API responses for disabled features:
   - consistent status code and JSON contract
4. Add contract tests:
   - no internal links to disabled routes when flag is off (or they render safely)

## Acceptance Criteria

- No user-visible “version mismatch” disable messaging.
- Disabled surfaces never hard-404 when linked internally.
- Enabling a feature flag makes the surface live without code edits.

## Dependencies

- None.

## Files to modify

- `app/*` (disabled pages)
- `app/api/*` (disabled endpoints)
- `components/features/monetization/*`
- `components/features/history/*`
- `ops/env/*.env.example`
